-- create secret for Tulip integration

CREATE OR REPLACE SECRET tec_tulip_co
  TYPE = PASSWORD
  USERNAME = {{username}}
  PASSWORD = {{password}}
  COMMENT = 'Acces to tec.tulip.co instance';

-- create a network rule to access the Tulip instance

CREATE OR REPLACE NETWORK RULE tulip_instance
  MODE = EGRESS
  TYPE = HOST_PORT
  VALUE_LIST = ('tec.tulip.co');

-- Create access integration
CREATE OR REPLACE EXTERNAL ACCESS INTEGRATION tec_tulip_access_integration
  ALLOWED_NETWORK_RULES = (tulip_instance)
  ALLOWED_AUTHENTICATION_SECRETS = (tec_tulip_co)
  ENABLED = true;
